<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/annenkov/stlcnorm" target="_balnk">Project Page</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Stlc.CalcNotationsRecursive</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab7"></a><h1 class="section">Notation for reasoning using several transitive steps</h1>

<div class="paragraph"> </div>

 This implementation uses Coq's recursive notations (the ".." pattern). It works in simple cases, but using rewrites to fill the step witness fails sometimes when the terms have many implicit arguments. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.PeanoNat.html#"><span class="id" title="library">PeanoNat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#"><span class="id" title="library">ssreflect</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ssreflect.SsrSyntax</span>.<br/>

<br/>
</div>

<div class="doc">
This way of writing proofs is inspired by Lean and also available in Agda. The current implementations is not as general as Lean/Agda and allows for chaining only equality steps. Ideally, it should support any transitive relation. 
<div class="paragraph"> </div>

 First, we have to pack the equality witness into a record, to be able to define a notation for each step in the proof. This is required due to limitations of recursive notations in Coq: only single variable is allowed to repeat 
</div>
<div class="code">
<span class="id" title="keyword">Record</span> <a name="calc_item"><span class="id" title="record">calc_item</span></a> {<span class="id" title="var">A</span>} :=<br/>
&nbsp;&nbsp;<a name="mkCi"><span class="id" title="constructor">mkCi</span></a> { <a name="ci_src"><span class="id" title="projection">ci_src</span></a> : <a class="idref" href="Stlc.CalcNotationsRecursive.html#A"><span class="id" title="variable">A</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="ci_tgt"><span class="id" title="projection">ci_tgt</span></a> : <a class="idref" href="Stlc.CalcNotationsRecursive.html#A"><span class="id" title="variable">A</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="ci_pf"><span class="id" title="projection">ci_pf</span></a> : <a class="idref" href="Stlc.CalcNotationsRecursive.html#ci_src"><span class="id" title="method">ci_src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#ci_tgt"><span class="id" title="method">ci_tgt</span></a>}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="comp_eq"><span class="id" title="definition">comp_eq</span></a> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <a class="idref" href="Stlc.CalcNotationsRecursive.html#A"><span class="id" title="variable">A</span></a>} : <a class="idref" href="Stlc.CalcNotationsRecursive.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#c"><span class="id" title="variable">c</span></a>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">q</span>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="eq_trans_up_to"><span class="id" title="definition">eq_trans_up_to</span></a> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y0</span> <span class="id" title="var">y1</span> <span class="id" title="var">z</span> : <a class="idref" href="Stlc.CalcNotationsRecursive.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">p0</span> : <a class="idref" href="Stlc.CalcNotationsRecursive.html#y0"><span class="id" title="variable">y0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#y1"><span class="id" title="variable">y1</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Stlc.CalcNotationsRecursive.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#y0"><span class="id" title="variable">y0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#y1"><span class="id" title="variable">y1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#z"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#z"><span class="id" title="variable">z</span></a> := (<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> =&gt; @<a class="idref" href="Stlc.CalcNotationsRecursive.html#comp_eq"><span class="id" title="definition">comp_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="Stlc.CalcNotationsRecursive.html#p"><span class="id" title="variable">p</span></a> (<a class="idref" href="Stlc.CalcNotationsRecursive.html#comp_eq"><span class="id" title="definition">comp_eq</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#p0"><span class="id" title="variable">p0</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#q"><span class="id" title="variable">q</span></a>)).<br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;_src&nbsp;{A&nbsp;:&nbsp;Type}&nbsp;{a&nbsp;b&nbsp;:&nbsp;A}&nbsp;(p&nbsp;:&nbsp;a&nbsp;=&nbsp;b)&nbsp;:=&nbsp;a.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Definition&nbsp;_tgt&nbsp;{A&nbsp;:&nbsp;Type}&nbsp;{a&nbsp;b&nbsp;:&nbsp;A}&nbsp;(p&nbsp;:&nbsp;a&nbsp;=&nbsp;b)&nbsp;:=&nbsp;b.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="35ebd44397c7b18220f9c6576413e882"><span class="id" title="notation">&quot;</span></a>a0 = b0 'by' t0" := (<a class="idref" href="Stlc.CalcNotationsRecursive.html#mkCi"><span class="id" title="constructor">mkCi</span></a> <span class="id" title="var">_</span> <span class="id" title="var">a0</span> <span class="id" title="var">b0</span> <span class="id" title="var">t0</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70, <span class="id" title="var">b0</span> <span class="id" title="tactic">at</span> <span class="id" title="var">next</span> <span class="id" title="keyword">level</span>): <span class="id" title="var">calc_scope</span>.<br/>
<span class="comment">(*&nbsp;Notation&nbsp;"a0&nbsp;=&nbsp;b0&nbsp;'by'&nbsp;t0"&nbsp;:=&nbsp;(t0&nbsp;:&nbsp;a0&nbsp;=&nbsp;b0)&nbsp;(at&nbsp;level&nbsp;70,&nbsp;b0&nbsp;at&nbsp;next&nbsp;level):&nbsp;calc_scope.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="2322dce750449c5741096c3e59bd1f96"><span class="id" title="notation">&quot;</span></a>'smp' t" := (<span class="id" title="keyword">let</span> <span class="id" title="var">p</span>:=<span class="id" title="var">t</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">ltac</span>: (<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">p</span> := ?<span class="id" title="var">t</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">p</span>;<span class="id" title="tactic">exact</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70).<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="dbb3de5743304be4bed38386f86bda1b"><span class="id" title="notation">&quot;</span></a>'calc' ci0 ; .. ; cin 'end'" :=<br/>
&nbsp;&nbsp;(@<a class="idref" href="Stlc.CalcNotationsRecursive.html#eq_trans_up_to"><span class="id" title="definition">eq_trans_up_to</span></a> <span class="id" title="var">_</span> (<a class="idref" href="Stlc.CalcNotationsRecursive.html#ci_src"><span class="id" title="projection">ci_src</span></a> <span class="id" title="var">ci0</span>) (<a class="idref" href="Stlc.CalcNotationsRecursive.html#ci_tgt"><span class="id" title="projection">ci_tgt</span></a> <span class="id" title="var">ci0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> (<a class="idref" href="Stlc.CalcNotationsRecursive.html#ci_pf"><span class="id" title="projection">ci_pf</span></a> <span class="id" title="var">ci0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( .. (@<a class="idref" href="Stlc.CalcNotationsRecursive.html#eq_trans_up_to"><span class="id" title="definition">eq_trans_up_to</span></a> <span class="id" title="var">_</span> (<a class="idref" href="Stlc.CalcNotationsRecursive.html#ci_src"><span class="id" title="projection">ci_src</span></a> <span class="id" title="var">cin</span>) (<a class="idref" href="Stlc.CalcNotationsRecursive.html#ci_tgt"><span class="id" title="projection">ci_tgt</span></a> <span class="id" title="var">cin</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> (<a class="idref" href="Stlc.CalcNotationsRecursive.html#ci_pf"><span class="id" title="projection">ci_pf</span></a> <span class="id" title="var">cin</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> ) .. )).<br/>

<br/>
<span class="comment">(*&nbsp;Notation&nbsp;"'calc'&nbsp;ci0&nbsp;;&nbsp;..&nbsp;;&nbsp;cin&nbsp;'end'"&nbsp;:=&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(@eq_trans_up_to&nbsp;_&nbsp;(_src&nbsp;ci0)&nbsp;(_tgt&nbsp;ci0)&nbsp;_&nbsp;_&nbsp;eq_refl&nbsp;ci0&nbsp;(&nbsp;..&nbsp;(@eq_trans_up_to&nbsp;_&nbsp;(_src&nbsp;cin)&nbsp;(_tgt&nbsp;cin)&nbsp;_&nbsp;_&nbsp;eq_refl&nbsp;cin&nbsp;eq_refl&nbsp;)&nbsp;..&nbsp;)).&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
Notations for lifting the rewriting tactic to the term level. It tries both directions and proves the goal by reflexivity afterwards 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a name="2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">&quot;</span></a>{{ f }}" := (<span class="id" title="keyword">ltac</span>:((<span class="id" title="tactic">rewrite</span> <span class="id" title="var">f</span>;<span class="id" title="tactic">reflexivity</span>) || (<span class="id" title="tactic">rewrite</span> &lt;-<span class="id" title="var">f</span>; <span class="id" title="tactic">reflexivity</span>))) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70).<br/>
<span class="id" title="keyword">Notation</span> <a name="1395382b3edbca70dd55fbc5688f4dfa"><span class="id" title="notation">&quot;</span></a>{{ &lt;- f }}" := (<span class="id" title="keyword">ltac</span>:((<span class="id" title="tactic">rewrite</span> &lt;-<span class="id" title="var">f</span>; <span class="id" title="tactic">reflexivity</span>))) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70).<br/>
<span class="id" title="keyword">Notation</span> <a name="6feab5fa4d080ed31cf1e95c0632d963"><span class="id" title="notation">&quot;</span></a>{{ -&gt; f }}" := (<span class="id" title="keyword">ltac</span>:((<span class="id" title="tactic">rewrite</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">reflexivity</span>))) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70).<br/>

<br/>
</div>

<div class="doc">
<a name="lab8"></a><h2 class="section">Examples</h2>

<div class="paragraph"> </div>

 Terms, witnessing the equality steps (the part that goes after "by") can be built completely, or one can leave underscores and use <span class="inlinecode"><span class="id" title="var">Program</span></span> <span class="inlinecode"><span class="id" title="keyword">Definition</span></span> if necessary. Also, it is possible to use rewriting using the <a href=" some_lemma "> some_lemma </a> notation 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">calc_scope</span>.<br/>

<br/>
</div>

<div class="doc">
This proof is complete and we don't need to use <span class="inlinecode"><span class="id" title="var">Program</span></span> <span class="inlinecode"><span class="id" title="keyword">Definition</span></span> 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="ex_nat1"><span class="id" title="definition">ex_nat1</span></a> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.CalcNotationsRecursive.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#m"><span class="id" title="variable">m</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.CalcNotationsRecursive.html#dbb3de5743304be4bed38386f86bda1b"><span class="id" title="notation">calc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.CalcNotationsRecursive.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#35ebd44397c7b18220f9c6576413e882"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.CalcNotationsRecursive.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#35ebd44397c7b18220f9c6576413e882"><span class="id" title="notation">by</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="Stlc.CalcNotationsRecursive.html#dbb3de5743304be4bed38386f86bda1b"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span>             <a class="idref" href="Stlc.CalcNotationsRecursive.html#35ebd44397c7b18220f9c6576413e882"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#m"><span class="id" title="variable">m</span></a>  <a class="idref" href="Stlc.CalcNotationsRecursive.html#35ebd44397c7b18220f9c6576413e882"><span class="id" title="notation">by</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.CalcNotationsRecursive.html#dbb3de5743304be4bed38386f86bda1b"><span class="id" title="notation">end</span></a>.<br/>

<br/>
</div>

<div class="doc">
Note that the second item in the chain of steps starts with the underscore. This term usually can be inferred by Coq. We know that the this underscore must be filled-in with the "target" from the previous step, but there is no way to encode this due to the limitations of recursive notations in Coq 
<div class="paragraph"> </div>

 In this example we use underscores for all terms witnessing the steps 
</div>
<div class="code">
<span class="id" title="keyword">Program Definition</span> <a name="ex_nat2"><span class="id" title="definition">ex_nat2</span></a> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.CalcNotationsRecursive.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.CalcNotationsRecursive.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#k"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#n"><span class="id" title="variable">n</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.CalcNotationsRecursive.html#dbb3de5743304be4bed38386f86bda1b"><span class="id" title="notation">calc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.CalcNotationsRecursive.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#35ebd44397c7b18220f9c6576413e882"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.CalcNotationsRecursive.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#k"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#35ebd44397c7b18220f9c6576413e882"><span class="id" title="notation">by</span></a> <span class="id" title="var">_</span> <a class="idref" href="Stlc.CalcNotationsRecursive.html#dbb3de5743304be4bed38386f86bda1b"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span>           <a class="idref" href="Stlc.CalcNotationsRecursive.html#35ebd44397c7b18220f9c6576413e882"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.CalcNotationsRecursive.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#k"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#35ebd44397c7b18220f9c6576413e882"><span class="id" title="notation">by</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.CalcNotationsRecursive.html#dbb3de5743304be4bed38386f86bda1b"><span class="id" title="notation">end</span></a>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
In this example we use use rewriting to prove steps by providing lemmas in double curly braces 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="ex_nat3"><span class="id" title="definition">ex_nat3</span></a> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">k</span> : <a class="idref" href="Stlc.CalcNotationsRecursive.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.CalcNotationsRecursive.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#m"><span class="id" title="variable">m</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.CalcNotationsRecursive.html#dbb3de5743304be4bed38386f86bda1b"><span class="id" title="notation">calc</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.CalcNotationsRecursive.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#35ebd44397c7b18220f9c6576413e882"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.CalcNotationsRecursive.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#35ebd44397c7b18220f9c6576413e882"><span class="id" title="notation">by</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#plus_n_O"><span class="id" title="lemma">plus_n_O</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#dbb3de5743304be4bed38386f86bda1b"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span>                  <a class="idref" href="Stlc.CalcNotationsRecursive.html#35ebd44397c7b18220f9c6576413e882"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.CalcNotationsRecursive.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#35ebd44397c7b18220f9c6576413e882"><span class="id" title="notation">by</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#dbb3de5743304be4bed38386f86bda1b"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span>                  <a class="idref" href="Stlc.CalcNotationsRecursive.html#35ebd44397c7b18220f9c6576413e882"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#35ebd44397c7b18220f9c6576413e882"><span class="id" title="notation">by</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a> <a class="idref" href="Stlc.CalcNotationsRecursive.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.CalcNotationsRecursive.html#dbb3de5743304be4bed38386f86bda1b"><span class="id" title="notation">end</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
