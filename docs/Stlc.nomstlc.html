<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/annenkov/stlcnorm" target="_balnk">Project Page</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Stlc.nomstlc</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.PeanoNat.html#"><span class="id" title="library">PeanoNat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.Peano_dec.html#"><span class="id" title="library">Peano_dec</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Logic.ProofIrrelevance.html#"><span class="id" title="library">ProofIrrelevance</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Stlc.CustomTactics.html#"><span class="id" title="library">CustomTactics</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Stlc.Nom.html#"><span class="id" title="library">Nom</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Stlc.OrdSet.html#"><span class="id" title="library">OrdSet</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="TSetMod"><span class="id" title="module">TSetMod</span></a> := <a class="idref" href="Stlc.OrdSet.html#SetExt"><span class="id" title="module">SetExt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.PeanoNat.html#Nat"><span class="id" title="module">PeanoNat.Nat</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="AtomN"><span class="id" title="module">AtomN</span></a> &lt;: <a class="idref" href="Stlc.Nom.html#Atom"><span class="id" title="module">Atom</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a name="AtomN.V"><span class="id" title="module">V</span></a> := <a class="idref" href="Stlc.nomstlc.html#TSetMod"><span class="id" title="module">TSetMod</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a name="AtomN.Atom_inf"><span class="id" title="axiom">Atom_inf</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">X</span> : <a class="idref" href="Stlc.nomstlc.html#AtomN.t"><span class="id" title="definition">V.t</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="Stlc.nomstlc.html#AtomN.elt"><span class="id" title="definition">V.elt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="Stlc.nomstlc.html#AtomN.In"><span class="id" title="definition">V.In</span></a> <a class="idref" href="Stlc.nomstlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stlc.nomstlc.html#X"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="AtomN.eq_dec"><span class="id" title="definition">eq_dec</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.PeanoNat.html#Nat.eq_dec"><span class="id" title="axiom">Nat.eq_dec</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Stlc.nomstlc.html#AtomN"><span class="id" title="module">AtomN</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="NomN"><span class="id" title="module">NomN</span></a> := <a class="idref" href="Stlc.Nom.html#Nominal"><span class="id" title="module">Nominal</span></a> <a class="idref" href="Stlc.nomstlc.html#AtomN"><span class="id" title="module">AtomN</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">NomN</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">NomN.Atom.V</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">NomAtom</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">PFin</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="Atom"><span class="id" title="abbreviation">Atom</span></a> := <a class="idref" href="Stlc.nomstlc.html#elt"><span class="id" title="definition">NomN.Atom.V.elt</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab9"></a><h2 class="section">Basic definitions</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="Ty"><span class="id" title="inductive">Ty</span></a> : <span class="id" title="keyword">Set</span> :=<br/>
&nbsp;&nbsp;| <a name="tInt"><span class="id" title="constructor">tInt</span></a> : <a class="idref" href="Stlc.nomstlc.html#Ty"><span class="id" title="inductive">Ty</span></a><br/>
&nbsp;&nbsp;| <a name="tArr"><span class="id" title="constructor">tArr</span></a> : <a class="idref" href="Stlc.nomstlc.html#Ty"><span class="id" title="inductive">Ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Ty"><span class="id" title="inductive">Ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Ty"><span class="id" title="inductive">Ty</span></a>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a name="NomTy"><span class="id" title="instance">NomTy</span></a> : <a class="idref" href="Stlc.nomstlc.html#NomSet"><span class="id" title="class">NomSet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">Carrier</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">Ty</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">action</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">fun</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">p</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">ty</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">=&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">ty</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">supp</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">fun</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">ty</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">=&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">empty</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">action_id</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">fun</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">a</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">=&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">eq_refl</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">_</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">action_compose</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">fun</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">a</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">p1</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">p2</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">=&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">eq_refl</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">support_spec</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">fun</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">p</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">ty</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">H</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">=&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">eq_refl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="3dbbab75c4a5953ee3c8ba12d6cb2e26"><span class="id" title="notation">&quot;</span></a>A :-&gt; B" := (<a class="idref" href="Stlc.nomstlc.html#tArr"><span class="id" title="constructor">tArr</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70).<br/>

<br/>
</div>

<div class="doc">
The syntax for STLC. We use <span class="inlinecode"><a class="idref" href="Stlc.nomstlc.html#Atom"><span class="id" title="abbreviation">Atom</span></a></span> type to represent variable names 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a name="Exp"><span class="id" title="inductive">Exp</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a name="Int"><span class="id" title="constructor">Int</span></a> : <a class="idref" href="Stlc.nomstlc.html#Atom"><span class="id" title="abbreviation">Atom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Exp"><span class="id" title="inductive">Exp</span></a><br/>
&nbsp;&nbsp;| <a name="Var"><span class="id" title="constructor">Var</span></a> : <a class="idref" href="Stlc.nomstlc.html#Atom"><span class="id" title="abbreviation">Atom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Exp"><span class="id" title="inductive">Exp</span></a><br/>
&nbsp;&nbsp;| <a name="Lam"><span class="id" title="constructor">Lam</span></a> : <a class="idref" href="Stlc.nomstlc.html#Atom"><span class="id" title="abbreviation">Atom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Exp"><span class="id" title="inductive">Exp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Exp"><span class="id" title="inductive">Exp</span></a><br/>
&nbsp;&nbsp;| <a name="App"><span class="id" title="constructor">App</span></a> : <a class="idref" href="Stlc.nomstlc.html#Exp"><span class="id" title="inductive">Exp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Exp"><span class="id" title="inductive">Exp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Exp"><span class="id" title="inductive">Exp</span></a>.<br/>

<br/>
</div>

<div class="doc">
Action of a permutation <span class="inlinecode"><a class="idref" href="Stlc.Nom.html#p"><span class="id" title="variable">p</span></a></span> on epressions <span class="inlinecode"><a class="idref" href="Stlc.StlcCCC.html#Exp"><span class="id" title="inductive">Exp</span></a></span> 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a name="ac_exp"><span class="id" title="definition">ac_exp</span></a> (<span class="id" title="var">p</span> : <a class="idref" href="Stlc.nomstlc.html#Perm"><span class="id" title="record">Perm</span></a>) (<span class="id" title="var">e</span> : <a class="idref" href="Stlc.nomstlc.html#Exp"><span class="id" title="inductive">Exp</span></a>) : <a class="idref" href="Stlc.nomstlc.html#Exp"><span class="id" title="inductive">Exp</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Stlc.nomstlc.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#Int"><span class="id" title="constructor">Int</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="Stlc.nomstlc.html#Int"><span class="id" title="constructor">Int</span></a> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#Var"><span class="id" title="constructor">Var</span></a> <span class="id" title="var">v</span> =&gt; <a class="idref" href="Stlc.nomstlc.html#Var"><span class="id" title="constructor">Var</span></a> ((<a class="idref" href="Stlc.nomstlc.html#perm"><span class="id" title="projection">perm</span></a> <a class="idref" href="Stlc.nomstlc.html#p"><span class="id" title="variable">p</span></a>) <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#Lam"><span class="id" title="constructor">Lam</span></a> <span class="id" title="var">v</span> <span class="id" title="var">e1</span> =&gt; <a class="idref" href="Stlc.nomstlc.html#Lam"><span class="id" title="constructor">Lam</span></a> ((<a class="idref" href="Stlc.nomstlc.html#perm"><span class="id" title="projection">perm</span></a> <a class="idref" href="Stlc.nomstlc.html#p"><span class="id" title="variable">p</span></a>) <span class="id" title="var">v</span>) (<a class="idref" href="Stlc.nomstlc.html#ac_exp"><span class="id" title="definition">ac_exp</span></a> <a class="idref" href="Stlc.nomstlc.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#App"><span class="id" title="constructor">App</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt; <a class="idref" href="Stlc.nomstlc.html#App"><span class="id" title="constructor">App</span></a> (<a class="idref" href="Stlc.nomstlc.html#ac_exp"><span class="id" title="definition">ac_exp</span></a> <a class="idref" href="Stlc.nomstlc.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="Stlc.nomstlc.html#ac_exp"><span class="id" title="definition">ac_exp</span></a> <a class="idref" href="Stlc.nomstlc.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Support of an epression <span class="inlinecode"><a class="idref" href="Stlc.OrdSet.html#e"><span class="id" title="variable">e</span></a></span> is a set of all atoms 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a name="supp_exp"><span class="id" title="definition">supp_exp</span></a> (<span class="id" title="var">e</span> : <a class="idref" href="Stlc.nomstlc.html#Exp"><span class="id" title="inductive">Exp</span></a>) : <a class="idref" href="Stlc.nomstlc.html#t"><span class="id" title="axiom">Atom.V.t</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Stlc.nomstlc.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#Int"><span class="id" title="constructor">Int</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="Stlc.nomstlc.html#empty"><span class="id" title="axiom">empty</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#Var"><span class="id" title="constructor">Var</span></a> <span class="id" title="var">v</span> =&gt; <a class="idref" href="Stlc.nomstlc.html#singleton"><span class="id" title="axiom">singleton</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#Lam"><span class="id" title="constructor">Lam</span></a> <span class="id" title="var">v</span> <span class="id" title="var">e1</span> =&gt; <a class="idref" href="Stlc.nomstlc.html#add"><span class="id" title="axiom">add</span></a> <span class="id" title="var">v</span> (<a class="idref" href="Stlc.nomstlc.html#supp_exp"><span class="id" title="definition">supp_exp</span></a> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#App"><span class="id" title="constructor">App</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt; <a class="idref" href="Stlc.nomstlc.html#union"><span class="id" title="axiom">union</span></a> (<a class="idref" href="Stlc.nomstlc.html#supp_exp"><span class="id" title="definition">supp_exp</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="Stlc.nomstlc.html#supp_exp"><span class="id" title="definition">supp_exp</span></a> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Set of free variables 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a name="fv_exp"><span class="id" title="definition">fv_exp</span></a> (<span class="id" title="var">e</span> : <a class="idref" href="Stlc.nomstlc.html#Exp"><span class="id" title="inductive">Exp</span></a>) : <a class="idref" href="Stlc.nomstlc.html#PFin"><span class="id" title="instance">PFin</span></a>  :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Stlc.nomstlc.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#Int"><span class="id" title="constructor">Int</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="Stlc.nomstlc.html#empty"><span class="id" title="axiom">empty</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#Var"><span class="id" title="constructor">Var</span></a> <span class="id" title="var">v</span> =&gt; <a class="idref" href="Stlc.nomstlc.html#singleton"><span class="id" title="axiom">singleton</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#Lam"><span class="id" title="constructor">Lam</span></a> <span class="id" title="var">v</span> <span class="id" title="var">e1</span> =&gt; <a class="idref" href="Stlc.nomstlc.html#diff"><span class="id" title="axiom">diff</span></a> (<a class="idref" href="Stlc.nomstlc.html#fv_exp"><span class="id" title="definition">fv_exp</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="Stlc.nomstlc.html#singleton"><span class="id" title="axiom">singleton</span></a> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#App"><span class="id" title="constructor">App</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt; <a class="idref" href="Stlc.nomstlc.html#union"><span class="id" title="axiom">union</span></a> (<a class="idref" href="Stlc.nomstlc.html#fv_exp"><span class="id" title="definition">fv_exp</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="Stlc.nomstlc.html#fv_exp"><span class="id" title="definition">fv_exp</span></a> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Set of all variables is the support of <span class="inlinecode"><a class="idref" href="Stlc.OrdSet.html#e"><span class="id" title="variable">e</span></a></span> 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="vars_exp"><span class="id" title="definition">vars_exp</span></a> (<span class="id" title="var">e</span> : <a class="idref" href="Stlc.nomstlc.html#Exp"><span class="id" title="inductive">Exp</span></a>) : <a class="idref" href="Stlc.nomstlc.html#PFin"><span class="id" title="instance">PFin</span></a>  := <a class="idref" href="Stlc.nomstlc.html#supp_exp"><span class="id" title="definition">supp_exp</span></a> <a class="idref" href="Stlc.nomstlc.html#e"><span class="id" title="variable">e</span></a>.<br/>

<br/>
</div>

<div class="doc">
Nominal set of lambda expressions 
</div>
<div class="code">
<span class="id" title="keyword">Instance</span> <a name="NomExp"><span class="id" title="instance">NomExp</span></a> : <a class="idref" href="Stlc.nomstlc.html#NomSet"><span class="id" title="class">NomSet</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">Carrier</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">Exp</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">action</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">fun</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">p</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">e</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">=&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">ac_exp</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">p</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">e</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">supp</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">fun</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">e</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">=&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">supp_exp</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">e</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">action_id</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">fun</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">e</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">=&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">_</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">action_compose</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">fun</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">e</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">p1</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">p2</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">=&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">_</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">support_spec</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">_</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}).<br/>
- <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHe</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHe1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHe2</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHe</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHe1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHe2</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">p</span> <span class="id" title="var">e</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHe</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">He1</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <a class="idref" href="Stlc.nomstlc.html#In"><span class="id" title="axiom">In</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="Stlc.nomstlc.html#supp_exp"><span class="id" title="definition">supp_exp</span></a> <span class="id" title="var">e1</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#perm"><span class="id" title="projection">perm</span></a> <span class="id" title="var">p</span> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">He2</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <a class="idref" href="Stlc.nomstlc.html#In"><span class="id" title="axiom">In</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="Stlc.nomstlc.html#supp_exp"><span class="id" title="definition">supp_exp</span></a> <span class="id" title="var">e2</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#perm"><span class="id" title="projection">perm</span></a> <span class="id" title="var">p</span> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHe1</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHe2</span>;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">&quot;</span></a>a ∪ b" := (<a class="idref" href="Stlc.nomstlc.html#union"><span class="id" title="axiom">union</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">SetFacts</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab10"></a><h2 class="section">Alpha-equivalence</h2>

<div class="paragraph"> </div>

 We introduce the following notation <span class="inlinecode"><a class="idref" href="Stlc.CalcNotationsExamples.html#Examples.a"><span class="id" title="variable">a</span></a></span> <span class="inlinecode">##</span> <span class="inlinecode">(<a class="idref" href="Stlc.Nom.html#a1"><span class="id" title="variable">a1</span></a>,<a class="idref" href="Stlc.Nom.html#a2"><span class="id" title="variable">a2</span></a>,...,<span class="id" title="var">an</span>)</span> 
    denotiong that the atom <span class="inlinecode"><a class="idref" href="Stlc.CalcNotationsExamples.html#Examples.a"><span class="id" title="variable">a</span></a></span> is fresh for all the elements in the n-tuple.
    That is, <span class="inlinecode"></span> <span class="inlinecode">(<a class="idref" href="Stlc.CalcNotationsExamples.html#Examples.a"><span class="id" title="variable">a</span></a></span> <span class="inlinecode">#</span> <span class="inlinecode"><a class="idref" href="Stlc.Nom.html#a1"><span class="id" title="variable">a1</span></a>)</span> <span class="inlinecode">/\</span> <span class="inlinecode">(<a class="idref" href="Stlc.CalcNotationsExamples.html#Examples.a"><span class="id" title="variable">a</span></a></span> <span class="inlinecode">#</span> <span class="inlinecode"><a class="idref" href="Stlc.Nom.html#a2"><span class="id" title="variable">a2</span></a>)</span> <span class="inlinecode">...</span> <span class="inlinecode">/\</span> <span class="inlinecode">(<a class="idref" href="Stlc.CalcNotationsExamples.html#Examples.a"><span class="id" title="variable">a</span></a></span> <span class="inlinecode">#</span> <span class="inlinecode"><span class="id" title="var">an</span>)</span> 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a name="7cf561a186c34ac55ae08c90d289fbfd"><span class="id" title="notation">&quot;</span></a>a ## '(' a1 , .. , an ')'" :=<br/>
&nbsp;&nbsp;((<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#and"><span class="id" title="inductive">and</span></a> (<a class="idref" href="Stlc.nomstlc.html#fresh"><span class="id" title="definition">fresh</span></a> <span class="id" title="var">a</span> <span class="id" title="var">a1</span>)) .. (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#and"><span class="id" title="inductive">and</span></a> (<a class="idref" href="Stlc.nomstlc.html#fresh"><span class="id" title="definition">fresh</span></a> <span class="id" title="var">a</span> <span class="id" title="var">an</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>) ..) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40).<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;e1 =α e2" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 80).<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="ae_exp"><span class="id" title="inductive">ae_exp</span></a> : <a class="idref" href="Stlc.nomstlc.html#NomExp"><span class="id" title="instance">NomExp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#NomExp"><span class="id" title="instance">NomExp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a name="ae_int"><span class="id" title="constructor">ae_int</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#Int"><span class="id" title="constructor">Int</span></a> <a class="idref" href="Stlc.nomstlc.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">=</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">α</span></a> <a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#Int"><span class="id" title="constructor">Int</span></a> <a class="idref" href="Stlc.nomstlc.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">)</span></a><br/>
| <a name="ae_var"><span class="id" title="constructor">ae_var</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <a class="idref" href="Stlc.nomstlc.html#NomAtom"><span class="id" title="instance">NomAtom</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">=</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">α</span></a> <a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">)</span></a><br/>
| <a name="ae_lam"><span class="id" title="constructor">ae_lam</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <a class="idref" href="Stlc.nomstlc.html#NomAtom"><span class="id" title="instance">NomAtom</span></a>) (<span class="id" title="var">e1</span> <span class="id" title="var">e2</span> : <a class="idref" href="Stlc.nomstlc.html#NomExp"><span class="id" title="instance">NomExp</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Stlc.nomstlc.html#7cf561a186c34ac55ae08c90d289fbfd"><span class="id" title="notation">##</span></a> <a class="idref" href="Stlc.nomstlc.html#7cf561a186c34ac55ae08c90d289fbfd"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="Stlc.nomstlc.html#7cf561a186c34ac55ae08c90d289fbfd"><span class="id" title="notation">,</span></a> <a class="idref" href="Stlc.nomstlc.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="Stlc.nomstlc.html#7cf561a186c34ac55ae08c90d289fbfd"><span class="id" title="notation">,</span></a> <a class="idref" href="Stlc.nomstlc.html#vars_exp"><span class="id" title="definition">vars_exp</span></a> <a class="idref" href="Stlc.nomstlc.html#e1"><span class="id" title="variable">e1</span></a><a class="idref" href="Stlc.nomstlc.html#7cf561a186c34ac55ae08c90d289fbfd"><span class="id" title="notation">,</span></a> <a class="idref" href="Stlc.nomstlc.html#vars_exp"><span class="id" title="definition">vars_exp</span></a> <a class="idref" href="Stlc.nomstlc.html#e2"><span class="id" title="variable">e2</span></a><a class="idref" href="Stlc.nomstlc.html#7cf561a186c34ac55ae08c90d289fbfd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.Nom.html#22d243e7b41bffb6b58a83a13b472064"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#swap"><span class="id" title="definition">swap</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Stlc.nomstlc.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="Stlc.Nom.html#22d243e7b41bffb6b58a83a13b472064"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.Nom.html#22d243e7b41bffb6b58a83a13b472064"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.nomstlc.html#e1"><span class="id" title="variable">e1</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">=</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">α</span></a> <a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.Nom.html#22d243e7b41bffb6b58a83a13b472064"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#swap"><span class="id" title="definition">swap</span></a> <a class="idref" href="Stlc.nomstlc.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Stlc.nomstlc.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="Stlc.Nom.html#22d243e7b41bffb6b58a83a13b472064"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.Nom.html#22d243e7b41bffb6b58a83a13b472064"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.nomstlc.html#e2"><span class="id" title="variable">e2</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Stlc.nomstlc.html#e1"><span class="id" title="variable">e1</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">=</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">α</span></a> <a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="Stlc.nomstlc.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Stlc.nomstlc.html#e2"><span class="id" title="variable">e2</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">)</span></a><br/>
| <a name="ae_app"><span class="id" title="constructor">ae_app</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> <span class="id" title="var">e1'</span> <span class="id" title="var">e2'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">=</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">α</span></a> <a class="idref" href="Stlc.nomstlc.html#e1'"><span class="id" title="variable">e1'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#e2"><span class="id" title="variable">e2</span></a> <a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">=</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">α</span></a> <a class="idref" href="Stlc.nomstlc.html#e2'"><span class="id" title="variable">e2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#App"><span class="id" title="constructor">App</span></a> <a class="idref" href="Stlc.nomstlc.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="Stlc.nomstlc.html#e2"><span class="id" title="variable">e2</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">=</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">α</span></a> <a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#App"><span class="id" title="constructor">App</span></a> <a class="idref" href="Stlc.nomstlc.html#e1'"><span class="id" title="variable">e1'</span></a> <a class="idref" href="Stlc.nomstlc.html#e2'"><span class="id" title="variable">e2'</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">)</span></a><br/>
<span class="id" title="keyword">where</span> <a name="810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">&quot;</span></a>e1 =α e2" := (<a class="idref" href="Stlc.nomstlc.html#ae_exp"><span class="id" title="inductive">ae_exp</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="get_fresh"><span class="id" title="definition">get_fresh</span></a> (<span class="id" title="var">a</span> : <a class="idref" href="Stlc.nomstlc.html#PFin"><span class="id" title="instance">PFin</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="Stlc.nomstlc.html#NomAtom"><span class="id" title="instance">NomAtom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="Stlc.nomstlc.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Stlc.Nom.html#14c022ea7e7bdd6957f67fff7f875f71"><span class="id" title="notation">#</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<a class="idref" href="Stlc.nomstlc.html#Atom_inf"><span class="id" title="axiom">Atom.Atom_inf</span></a> (<a class="idref" href="Stlc.nomstlc.html#supp"><span class="id" title="method">supp</span></a> <span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Stlc.nomstlc.html#fresh"><span class="id" title="definition">fresh</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.nomstlc.html#disjoint_not_in_1"><span class="id" title="lemma">disjoint_not_in_1</span></a>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="Stlc.nomstlc.html#ae_exp"><span class="id" title="inductive">ae_exp</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="in_supp_union_iff"><span class="id" title="lemma">in_supp_union_iff</span></a> (<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <a class="idref" href="Stlc.nomstlc.html#PFin"><span class="id" title="instance">PFin</span></a>) <span class="id" title="var">k</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#In"><span class="id" title="axiom">In</span></a> <a class="idref" href="Stlc.nomstlc.html#k"><span class="id" title="variable">k</span></a> (<a class="idref" href="Stlc.nomstlc.html#supp"><span class="id" title="method">supp</span></a> ((<a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Stlc.nomstlc.html#ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">∪</span></a> <a class="idref" href="Stlc.nomstlc.html#b"><span class="id" title="variable">b</span></a>) : <a class="idref" href="Stlc.nomstlc.html#PFin"><span class="id" title="instance">PFin</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#4bfb4f2d0721ba668e3a802ab1b745a1"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#In"><span class="id" title="axiom">In</span></a> <a class="idref" href="Stlc.nomstlc.html#k"><span class="id" title="variable">k</span></a> (<a class="idref" href="Stlc.nomstlc.html#supp"><span class="id" title="method">supp</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="Stlc.nomstlc.html#In"><span class="id" title="axiom">In</span></a> <a class="idref" href="Stlc.nomstlc.html#k"><span class="id" title="variable">k</span></a> (<a class="idref" href="Stlc.nomstlc.html#supp"><span class="id" title="method">supp</span></a> <a class="idref" href="Stlc.nomstlc.html#b"><span class="id" title="variable">b</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">intuition</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> &lt;- <span class="id" title="var">in_supp_union_iff</span> : <span class="id" title="tactic">set</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="fresh_union_iff"><span class="id" title="lemma">fresh_union_iff</span></a> (<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <a class="idref" href="Stlc.nomstlc.html#PFin"><span class="id" title="instance">PFin</span></a>) (<span class="id" title="var">c</span> : <a class="idref" href="Stlc.nomstlc.html#NomAtom"><span class="id" title="instance">NomAtom</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Stlc.Nom.html#14c022ea7e7bdd6957f67fff7f875f71"><span class="id" title="notation">#</span></a> <a class="idref" href="Stlc.Nom.html#14c022ea7e7bdd6957f67fff7f875f71"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Stlc.nomstlc.html#ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">∪</span></a> <a class="idref" href="Stlc.nomstlc.html#b"><span class="id" title="variable">b</span></a> : <a class="idref" href="Stlc.nomstlc.html#PFin"><span class="id" title="instance">PFin</span></a><a class="idref" href="Stlc.Nom.html#14c022ea7e7bdd6957f67fff7f875f71"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#4bfb4f2d0721ba668e3a802ab1b745a1"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Stlc.Nom.html#14c022ea7e7bdd6957f67fff7f875f71"><span class="id" title="notation">#</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Stlc.nomstlc.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Stlc.Nom.html#14c022ea7e7bdd6957f67fff7f875f71"><span class="id" title="notation">#</span></a> <a class="idref" href="Stlc.nomstlc.html#b"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>;<span class="id" title="tactic">unfold</span> <a class="idref" href="Stlc.nomstlc.html#fresh"><span class="id" title="definition">fresh</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Stlc.nomstlc.html#Disjoint_spec"><span class="id" title="axiom">Disjoint_spec</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">k</span>); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>;<span class="id" title="tactic">unfold</span> <a class="idref" href="Stlc.nomstlc.html#fresh"><span class="id" title="definition">fresh</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Stlc.nomstlc.html#Disjoint_spec"><span class="id" title="axiom">Disjoint_spec</span></a> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <span class="id" title="var">k</span>). <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">intuition</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.nomstlc.html#union_1"><span class="id" title="lemma">union_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">intuition</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> &lt;- <span class="id" title="var">fresh_union_iff</span> : <span class="id" title="var">nom</span>.<br/>
<span class="id" title="keyword">Hint Resolve</span> -&gt; <span class="id" title="var">fresh_union_iff</span> : <span class="id" title="var">nom</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Basics</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="eq_dec_refl"><span class="id" title="lemma">eq_dec_refl</span></a> <span class="id" title="var">a</span> : <a class="idref" href="Stlc.nomstlc.html#eq_dec"><span class="id" title="abbreviation">eq_dec</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Stlc.nomstlc.html#eq_dec"><span class="id" title="abbreviation">eq_dec</span></a> <span class="id" title="var">a</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.Peano_dec.html#UIP_nat"><span class="id" title="definition">UIP_nat</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="eq_dec_neq"><span class="id" title="lemma">eq_dec_neq</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b</span> : <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Stlc.nomstlc.html#eq_dec"><span class="id" title="abbreviation">eq_dec</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Stlc.nomstlc.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <a class="idref" href="Stlc.nomstlc.html#p"><span class="id" title="variable">p</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Stlc.nomstlc.html#eq_dec"><span class="id" title="abbreviation">eq_dec</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b</span>);<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">H</span>;<span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">n</span>;<span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="eq_dec_neq'"><span class="id" title="lemma">eq_dec_neq'</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b</span> (<span class="id" title="var">Hneq</span> : <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#b"><span class="id" title="variable">b</span></a>): <a class="idref" href="Stlc.nomstlc.html#eq_dec"><span class="id" title="axiom">Atom.eq_dec</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Stlc.nomstlc.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <a class="idref" href="Stlc.nomstlc.html#Hneq"><span class="id" title="variable">Hneq</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="Stlc.nomstlc.html#eq_dec"><span class="id" title="axiom">Atom.eq_dec</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>;<span class="id" title="var">exfalso</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a name="identity_alpha_equiv"><span class="id" title="definition">identity_alpha_equiv</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="Stlc.nomstlc.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="Stlc.nomstlc.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="Stlc.nomstlc.html#x"><span class="id" title="variable">x</span></a>)<a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">=</span></a><a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">α</span></a> <a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="Stlc.nomstlc.html#y"><span class="id" title="variable">y</span></a> (<a class="idref" href="Stlc.nomstlc.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="Stlc.nomstlc.html#y"><span class="id" title="variable">y</span></a>)<a class="idref" href="Stlc.nomstlc.html#810b6cfefef1709e992dc939e4d8e946"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Stlc.nomstlc.html#Atom_inf"><span class="id" title="axiom">Atom.Atom_inf</span></a> (<a class="idref" href="Stlc.nomstlc.html#union"><span class="id" title="axiom">union</span></a> (<a class="idref" href="Stlc.nomstlc.html#singleton"><span class="id" title="axiom">singleton</span></a> <span class="id" title="var">x</span>) (<a class="idref" href="Stlc.nomstlc.html#singleton"><span class="id" title="axiom">singleton</span></a> <span class="id" title="var">y</span>))) <span class="id" title="keyword">as</span> [<span class="id" title="var">z</span> <span class="id" title="var">Hz</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hneq</span> : <span class="id" title="var">z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="var">z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">y</span>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">split</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hz</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.nomstlc.html#ae_lam"><span class="id" title="constructor">ae_lam</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">c</span>:=<span class="id" title="var">z</span>); <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="Stlc.nomstlc.html#fresh"><span class="id" title="definition">fresh</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="Stlc.nomstlc.html#Disjoint_spec"><span class="id" title="axiom">Disjoint_spec</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">u</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hz</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Stlc.nomstlc.html#singleton_spec"><span class="id" title="axiom">singleton_spec</span></a> <span class="id" title="tactic">in</span> *).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">x</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">intuition</span>;<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">y</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">intuition</span>;<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">x</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;  <span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">intuition</span>;<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">y</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;  <span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">intuition</span>;<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Stlc.nomstlc.html#swap_fn"><span class="id" title="definition">swap_fn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hneq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">L</span> <span class="id" title="var">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <a class="idref" href="Stlc.nomstlc.html#eq_dec"><span class="id" title="abbreviation">SetProperties.P.FM.eq_dec</span></a> <span class="id" title="var">z</span> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">L</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.nomstlc.html#eq_dec_neq'"><span class="id" title="lemma">eq_dec_neq'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H'</span> : <a class="idref" href="Stlc.nomstlc.html#eq_dec"><span class="id" title="abbreviation">SetProperties.P.FM.eq_dec</span></a> <span class="id" title="var">z</span> <span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">R</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.nomstlc.html#eq_dec_neq'"><span class="id" title="lemma">eq_dec_neq'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Stlc.nomstlc.html#eq_dec_refl"><span class="id" title="lemma">eq_dec_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab11"></a><h2 class="section">Typing</h2>

<div class="paragraph"> </div>

 Environments are defined inductively 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a name="Env"><span class="id" title="inductive">Env</span></a> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a name="empty"><span class="id" title="constructor">empty</span></a> : <a class="idref" href="Stlc.nomstlc.html#Env"><span class="id" title="inductive">Env</span></a><br/>
&nbsp;&nbsp;| <a name="cons"><span class="id" title="constructor">cons</span></a>  : <a class="idref" href="Stlc.nomstlc.html#Env"><span class="id" title="inductive">Env</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#NomAtom"><span class="id" title="instance">NomAtom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Env"><span class="id" title="inductive">Env</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="lookEnv"><span class="id" title="definition">lookEnv</span></a> {<span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">E</span> : <a class="idref" href="Stlc.nomstlc.html#Env"><span class="id" title="inductive">Env</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="Stlc.nomstlc.html#Atom"><span class="id" title="abbreviation">Atom</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Stlc.nomstlc.html#T"><span class="id" title="variable">T</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Stlc.nomstlc.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#empty"><span class="id" title="constructor">empty</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">E</span> <span class="id" title="var">y</span> <span class="id" title="var">A</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Stlc.nomstlc.html#eq_dec"><span class="id" title="axiom">Atom.eq_dec</span></a> <span class="id" title="var">y</span> <a class="idref" href="Stlc.nomstlc.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">A</span> <span class="id" title="keyword">else</span> <a class="idref" href="Stlc.nomstlc.html#lookEnv"><span class="id" title="definition">lookEnv</span></a> <a class="idref" href="Stlc.nomstlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.nomstlc.html#x"><span class="id" title="variable">x</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="ac_env"><span class="id" title="definition">ac_env</span></a> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">p</span> : <a class="idref" href="Stlc.nomstlc.html#Perm"><span class="id" title="record">Perm</span></a>) (<span class="id" title="var">e</span> : <a class="idref" href="Stlc.nomstlc.html#Env"><span class="id" title="inductive">Env</span></a> (<span class="id" title="var">A</span>:=<a class="idref" href="Stlc.nomstlc.html#A"><span class="id" title="variable">A</span></a>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Stlc.nomstlc.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#empty"><span class="id" title="constructor">empty</span></a> =&gt; <a class="idref" href="Stlc.nomstlc.html#empty"><span class="id" title="constructor">empty</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">env</span> <span class="id" title="var">a</span> <span class="id" title="var">e</span> =&gt; <a class="idref" href="Stlc.nomstlc.html#cons"><span class="id" title="constructor">cons</span></a> (<a class="idref" href="Stlc.nomstlc.html#ac_env"><span class="id" title="definition">ac_env</span></a> <a class="idref" href="Stlc.nomstlc.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="var">env</span>) (<a class="idref" href="Stlc.nomstlc.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Stlc.Nom.html#22d243e7b41bffb6b58a83a13b472064"><span class="id" title="notation">@</span></a> <span class="id" title="var">a</span>) <a class="idref" href="Stlc.nomstlc.html#e"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="dom"><span class="id" title="definition">dom</span></a> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">env</span> : <a class="idref" href="Stlc.nomstlc.html#Env"><span class="id" title="inductive">Env</span></a> (<span class="id" title="var">A</span>:=<a class="idref" href="Stlc.nomstlc.html#A"><span class="id" title="variable">A</span></a>)) : <a class="idref" href="Stlc.nomstlc.html#PFin"><span class="id" title="instance">PFin</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Stlc.nomstlc.html#env"><span class="id" title="variable">env</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#empty"><span class="id" title="constructor">empty</span></a> =&gt; <a class="idref" href="Stlc.nomstlc.html#empty"><span class="id" title="axiom">Atom.V.empty</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.nomstlc.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">env1</span> <span class="id" title="var">a</span> <span class="id" title="var">e</span> =&gt; <a class="idref" href="Stlc.nomstlc.html#add"><span class="id" title="axiom">add</span></a> <span class="id" title="var">a</span> (<a class="idref" href="Stlc.nomstlc.html#dom"><span class="id" title="definition">dom</span></a> <span class="id" title="var">env1</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Nominal set of environments
</div>
<div class="code">
<span class="id" title="keyword">Instance</span> <a name="NomEnv"><span class="id" title="instance">NomEnv</span></a> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} : <a class="idref" href="Stlc.nomstlc.html#NomSet"><span class="id" title="class">NomSet</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">Carrier</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">Env</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">(</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">A</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">A</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">action</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">ac_env</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">supp</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">dom</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">action_id</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">_</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">action_compose</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">_</span></a><a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">support_spec</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Stlc.nomstlc.html#Build_NomSet"><span class="id" title="constructor">_</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}).<br/>
- <span class="comment">(*&nbsp;action_id&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">env</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHenv</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="comment">(*&nbsp;action_compose&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">env</span> <span class="id" title="var">p</span> <span class="id" title="var">p'</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHenv</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="comment">(*&nbsp;support_spec&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span> <span class="id" title="var">env</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hdom</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a0</span>, <a class="idref" href="Stlc.nomstlc.html#In"><span class="id" title="axiom">In</span></a> <a class="idref" href="Stlc.nomstlc.html#a0"><span class="id" title="variable">a0</span></a> (<a class="idref" href="Stlc.nomstlc.html#dom"><span class="id" title="definition">dom</span></a> <span class="id" title="var">env</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">p</span> <a class="idref" href="Stlc.nomstlc.html#a0"><span class="id" title="variable">a0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.nomstlc.html#a0"><span class="id" title="variable">a0</span></a>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHenv</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
 A typing context extension: 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a name="1f44b7f001f8e4aca8f806353ec037dc"><span class="id" title="notation">&quot;</span></a>Gamma , a ::: A" := (<a class="idref" href="Stlc.nomstlc.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">Gamma</span> <span class="id" title="var">a</span> <span class="id" title="var">A</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 201).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="TEnv"><span class="id" title="definition">TEnv</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="Stlc.nomstlc.html#NomEnv"><span class="id" title="instance">NomEnv</span></a> (<span class="id" title="var">A</span>:=<a class="idref" href="Stlc.nomstlc.html#Ty"><span class="id" title="inductive">Ty</span></a>).<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;[ Gamma |- a ::: A ]".<br/>

<br/>
</div>

<div class="doc">
The usual typing rules for the STLC 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a name="Typing"><span class="id" title="inductive">Typing</span></a> : <a class="idref" href="Stlc.nomstlc.html#TEnv"><span class="id" title="definition">TEnv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#Exp"><span class="id" title="inductive">Exp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#NomTy"><span class="id" title="instance">NomTy</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="tyInt"><span class="id" title="constructor">tyInt</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">Gamma</span> : <a class="idref" href="Stlc.nomstlc.html#TEnv"><span class="id" title="definition">TEnv</span></a>) (<span class="id" title="var">n</span> : <a class="idref" href="Stlc.nomstlc.html#Atom"><span class="id" title="abbreviation">Atom</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.nomstlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#Int"><span class="id" title="constructor">Int</span></a> <a class="idref" href="Stlc.nomstlc.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">:::</span></a> <a class="idref" href="Stlc.nomstlc.html#tInt"><span class="id" title="constructor">tInt</span></a><a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;| <a name="tyVar"><span class="id" title="constructor">tyVar</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">Gamma</span> : <a class="idref" href="Stlc.nomstlc.html#TEnv"><span class="id" title="definition">TEnv</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="Stlc.nomstlc.html#NomAtom"><span class="id" title="instance">NomAtom</span></a>) (<span class="id" title="var">A</span> : <a class="idref" href="Stlc.nomstlc.html#Ty"><span class="id" title="inductive">Ty</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#lookEnv"><span class="id" title="definition">lookEnv</span></a> <a class="idref" href="Stlc.nomstlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.nomstlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Stlc.nomstlc.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.nomstlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="Stlc.nomstlc.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">:::</span></a> <a class="idref" href="Stlc.nomstlc.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;| <a name="tyLam"><span class="id" title="constructor">tyLam</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">Gamma</span> : <a class="idref" href="Stlc.nomstlc.html#TEnv"><span class="id" title="definition">TEnv</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="Stlc.nomstlc.html#NomAtom"><span class="id" title="instance">NomAtom</span></a>) (<span class="id" title="var">b</span> : <a class="idref" href="Stlc.nomstlc.html#Exp"><span class="id" title="inductive">Exp</span></a>) (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <a class="idref" href="Stlc.nomstlc.html#Ty"><span class="id" title="inductive">Ty</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stlc.Nom.html#14c022ea7e7bdd6957f67fff7f875f71"><span class="id" title="notation">#</span></a> <a class="idref" href="Stlc.nomstlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.nomstlc.html#Gamma"><span class="id" title="variable">Gamma</span></a><a class="idref" href="Stlc.nomstlc.html#1f44b7f001f8e4aca8f806353ec037dc"><span class="id" title="notation">,</span></a> <a class="idref" href="Stlc.nomstlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stlc.nomstlc.html#1f44b7f001f8e4aca8f806353ec037dc"><span class="id" title="notation">:::</span></a> <a class="idref" href="Stlc.nomstlc.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.nomstlc.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">:::</span></a> <a class="idref" href="Stlc.nomstlc.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.nomstlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="Stlc.nomstlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stlc.nomstlc.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">:::</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Stlc.nomstlc.html#3dbbab75c4a5953ee3c8ba12d6cb2e26"><span class="id" title="notation">:-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#B"><span class="id" title="variable">B</span></a><a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">)]</span></a><br/>
&nbsp;&nbsp;| <a name="tyApp"><span class="id" title="constructor">tyApp</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">Gamma</span> : <a class="idref" href="Stlc.nomstlc.html#TEnv"><span class="id" title="definition">TEnv</span></a>) (<span class="id" title="var">f</span> <span class="id" title="var">a</span> : <a class="idref" href="Stlc.nomstlc.html#Exp"><span class="id" title="inductive">Exp</span></a>) (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <a class="idref" href="Stlc.nomstlc.html#Ty"><span class="id" title="inductive">Ty</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.nomstlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.nomstlc.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">:::</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Stlc.nomstlc.html#3dbbab75c4a5953ee3c8ba12d6cb2e26"><span class="id" title="notation">:-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#B"><span class="id" title="variable">B</span></a><a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.nomstlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">:::</span></a> <a class="idref" href="Stlc.nomstlc.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.nomstlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#App"><span class="id" title="constructor">App</span></a> <a class="idref" href="Stlc.nomstlc.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">:::</span></a> <a class="idref" href="Stlc.nomstlc.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="Stlc.nomstlc.html#524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">]</span></a><br/>
<span class="id" title="keyword">where</span> <a name="524a42964e34c3c0aaf92aba2c47af6a"><span class="id" title="notation">&quot;</span></a>[ Gamma |- a ::: A ]" := (<a class="idref" href="Stlc.nomstlc.html#Typing"><span class="id" title="inductive">Typing</span></a> <span class="id" title="var">Gamma</span> <span class="id" title="var">a</span> <span class="id" title="var">A</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab12"></a><h2 class="section">Equivariance of the typing relation</h2>

<div class="paragraph"> </div>

 First, we prove lemmas showing equivariance of functions and relations
involved in the definition of the typing relation 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="equivar_lookEnv"><span class="id" title="lemma">equivar_lookEnv</span></a> (<span class="id" title="var">x</span> : <a class="idref" href="Stlc.nomstlc.html#NomAtom"><span class="id" title="instance">NomAtom</span></a>) (<span class="id" title="var">env</span> : <a class="idref" href="Stlc.nomstlc.html#NomEnv"><span class="id" title="instance">NomEnv</span></a> (<span class="id" title="var">A</span> :=<a class="idref" href="Stlc.nomstlc.html#Ty"><span class="id" title="inductive">Ty</span></a>)) <span class="id" title="var">ty</span> <span class="id" title="var">p</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#lookEnv"><span class="id" title="definition">lookEnv</span></a> <a class="idref" href="Stlc.nomstlc.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="Stlc.nomstlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Stlc.nomstlc.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.nomstlc.html#lookEnv"><span class="id" title="definition">lookEnv</span></a> (<a class="idref" href="Stlc.nomstlc.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Stlc.Nom.html#22d243e7b41bffb6b58a83a13b472064"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.nomstlc.html#env"><span class="id" title="variable">env</span></a>) (<a class="idref" href="Stlc.nomstlc.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Stlc.Nom.html#22d243e7b41bffb6b58a83a13b472064"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.nomstlc.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Stlc.nomstlc.html#ty"><span class="id" title="variable">ty</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> (<a class="idref" href="Stlc.nomstlc.html#eq_dec"><span class="id" title="axiom">Atom.eq_dec</span></a> <span class="id" title="var">c</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="Stlc.nomstlc.html#eq_dec"><span class="id" title="axiom">Atom.eq_dec</span></a> (<span class="id" title="var">p</span> <span class="id" title="var">x</span>) (<span class="id" title="var">p</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hneq</span> : <span class="id" title="var">p</span> <span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">p</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span> <span class="id" title="var">r</span> <span class="id" title="var">Hfin</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">c</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">c</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="Stlc.Nom.html#happly"><span class="id" title="lemma">happly</span></a> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">x</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="Stlc.Nom.html#happly"><span class="id" title="lemma">happly</span></a> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hpcx</span> : <a class="idref" href="Stlc.nomstlc.html#eq_dec"><span class="id" title="axiom">Atom.eq_dec</span></a> (<span class="id" title="var">p</span> <span class="id" title="var">c</span>) (<span class="id" title="var">p</span> <span class="id" title="var">x</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">Hneq</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.nomstlc.html#eq_dec_neq'"><span class="id" title="lemma">eq_dec_neq'</span></a>;<span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hpcx</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHenv</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This property is not specific for the support of the elements of <span class="inlinecode"><a class="idref" href="Stlc.nomstlc.html#TEnv"><span class="id" title="definition">TEnv</span></a></span>.
    Ideally, we want such lemma for any nominal set, but not all the definitions of suport have this property.
    It classical setting it is possible with the definition of smallest support, but in type theory it is trickier 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="equivar_supp_env"><span class="id" title="lemma">equivar_supp_env</span></a> (<span class="id" title="var">e</span> : <a class="idref" href="Stlc.nomstlc.html#NomAtom"><span class="id" title="instance">NomAtom</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="Stlc.nomstlc.html#TEnv"><span class="id" title="definition">TEnv</span></a>) <span class="id" title="var">p</span> :  <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#supp"><span class="id" title="method">supp</span></a> (<a class="idref" href="Stlc.nomstlc.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Stlc.Nom.html#22d243e7b41bffb6b58a83a13b472064"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.nomstlc.html#x"><span class="id" title="variable">x</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Stlc.Nom.html#22d243e7b41bffb6b58a83a13b472064"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.Nom.html#22d243e7b41bffb6b58a83a13b472064"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.nomstlc.html#supp"><span class="id" title="method">supp</span></a> <a class="idref" href="Stlc.nomstlc.html#x"><span class="id" title="variable">x</span></a> : <a class="idref" href="Stlc.nomstlc.html#PFin"><span class="id" title="instance">PFin</span></a><a class="idref" href="Stlc.Nom.html#22d243e7b41bffb6b58a83a13b472064"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.nomstlc.html#set_extensionality"><span class="id" title="axiom">set_extensionality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">e'</span>. <span class="id" title="tactic">split</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.nomstlc.html#set_extensionality"><span class="id" title="axiom">set_extensionality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">e'</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Stlc.nomstlc.html#set_map_iff"><span class="id" title="axiom">set_map_iff</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Stlc.nomstlc.html#add_iff"><span class="id" title="lemma">TSetMod.OP.P.Dec.F.add_iff</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Stlc.nomstlc.html#set_map_iff"><span class="id" title="axiom">set_map_iff</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span>|<span class="id" title="var">Htl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exists</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">split</span>;<span class="id" title="tactic">intuition</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">Htl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e''</span> <span class="id" title="var">He''</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">e''</span>;<span class="id" title="tactic">intuition</span>;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Stlc.nomstlc.html#set_map_iff"><span class="id" title="axiom">set_map_iff</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Stlc.nomstlc.html#add_iff"><span class="id" title="lemma">TSetMod.OP.P.Dec.F.add_iff</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Stlc.nomstlc.html#set_map_iff"><span class="id" title="axiom">set_map_iff</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e''</span> <span class="id" title="var">He''</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">He''</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">L</span> <span class="id" title="var">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Stlc.nomstlc.html#add_iff"><span class="id" title="lemma">TSetMod.OP.P.Dec.F.add_iff</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>;<span class="id" title="tactic">subst</span>;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">e''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">split</span>;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="equivar_fresh"><span class="id" title="lemma">equivar_fresh</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.nomstlc.html#equivar_rel"><span class="id" title="definition">equivar_rel</span></a> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">a</span> : <a class="idref" href="Stlc.nomstlc.html#NomAtom"><span class="id" title="instance">NomAtom</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="Stlc.nomstlc.html#TEnv"><span class="id" title="definition">TEnv</span></a>) =&gt; <a class="idref" href="Stlc.nomstlc.html#fresh"><span class="id" title="definition">fresh</span></a> <a class="idref" href="Stlc.nomstlc.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Stlc.nomstlc.html#x"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Stlc.nomstlc.html#equivar_rel"><span class="id" title="definition">equivar_rel</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Stlc.nomstlc.html#fresh"><span class="id" title="definition">fresh</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Stlc.nomstlc.html#Disjoint_spec"><span class="id" title="axiom">Disjoint_spec</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Stlc.nomstlc.html#equivar_supp_env"><span class="id" title="lemma">equivar_supp_env</span></a> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span> <span class="id" title="var">r</span> <span class="id" title="var">Hfin</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Stlc.nomstlc.html#set_map_iff"><span class="id" title="axiom">set_map_iff</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hx</span> <span class="id" title="var">He'</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">f</span> <span class="id" title="var">x</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="Stlc.nomstlc.html#singleton_spec"><span class="id" title="axiom">singleton_spec</span></a> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">He'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e</span> <span class="id" title="var">He'</span>]. <span class="id" title="tactic">intuition</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">e</span>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">replace</span> <span class="id" title="var">e</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">e</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="Stlc.Nom.html#happly"><span class="id" title="lemma">happly</span></a> <span class="id" title="var">l</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">x</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="Stlc.Nom.html#happly"><span class="id" title="lemma">happly</span></a> <span class="id" title="var">l</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">H</span> <span class="id" title="var">x</span>);<span class="id" title="tactic">intuition</span>;<span class="id" title="tactic">subst</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Explicit proof of equivarience of the typing relation 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="equivar_Typing"><span class="id" title="lemma">equivar_Typing</span></a> <span class="id" title="var">ty</span> : <a class="idref" href="Stlc.nomstlc.html#equivar_rel"><span class="id" title="definition">equivar_rel</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">e</span> =&gt; <a class="idref" href="Stlc.nomstlc.html#Typing"><span class="id" title="inductive">Typing</span></a> <a class="idref" href="Stlc.nomstlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.nomstlc.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Stlc.nomstlc.html#ty"><span class="id" title="variable">ty</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Stlc.nomstlc.html#equivar_rel"><span class="id" title="definition">equivar_rel</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">p</span> <span class="id" title="var">Hty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.nomstlc.html#equivar_lookEnv"><span class="id" title="lemma">equivar_lookEnv</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.nomstlc.html#equivar_fresh"><span class="id" title="lemma">equivar_fresh</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHHty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHty1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHty2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We add the previous equivarience lemmas as hints 
</div>
<div class="code">
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">equivar_lookEnv</span> <span class="id" title="var">equivar_fresh</span>.<br/>

<br/>
</div>

<div class="doc">
The proof can be automated, since it basically uses the fact that all the 
    pieces envolved in the proof are equivariant 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="equivar_Typing_alt"><span class="id" title="lemma">equivar_Typing_alt</span></a> <span class="id" title="var">ty</span> : <a class="idref" href="Stlc.nomstlc.html#equivar_rel"><span class="id" title="definition">equivar_rel</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">e</span> =&gt; <a class="idref" href="Stlc.nomstlc.html#Typing"><span class="id" title="inductive">Typing</span></a> <a class="idref" href="Stlc.nomstlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.nomstlc.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Stlc.nomstlc.html#ty"><span class="id" title="variable">ty</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Stlc.nomstlc.html#equivar_rel"><span class="id" title="definition">equivar_rel</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">p</span> <span class="id" title="var">Hty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hty</span>;<span class="id" title="tactic">econstructor</span>;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
